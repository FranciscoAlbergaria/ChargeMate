@startuml Station Operator - View Analytics & Update Charger Status

actor "Station Operator" as Operator
participant "Web Client" as Web
participant "Nginx\nReverse Proxy" as Nginx
participant "Backend\n(Spring Boot REST API)" as Backend
participant "Analytics Service" as Analytics
participant "Station Service" as Station
database "PostgreSQL" as DB

== Login ==
Operator -> Web : Enter credentials
Web -> Nginx : POST /api/login
Nginx -> Backend : POST /api/login
Backend -> DB : Validate credentials
DB --> Backend : User info
Backend --> Nginx : Auth token
Nginx --> Web : Auth token

== View Analytics ==
Operator -> Web : Open analytics dashboard
Web -> Nginx : GET /api/analytics?stationId=...
Nginx -> Backend : GET /api/analytics?stationId=...
Backend -> Analytics : Fetch KPIs
Analytics -> DB : Query analytics data
DB --> Analytics : KPIs
Analytics --> Backend : KPIs
Backend --> Nginx : KPIs
Nginx --> Web : KPIs

== Update Charger Status ==
Operator -> Web : Mark charger as maintenance
Web -> Nginx : PATCH /api/stations/{id}/status
Nginx -> Backend : PATCH /api/stations/{id}/status
Backend -> Station : Update status
Station -> DB : Update charger status
DB --> Station : Success
Station --> Backend : Status updated
Backend --> Nginx : Status updated
Nginx --> Web : Status updated

@enduml
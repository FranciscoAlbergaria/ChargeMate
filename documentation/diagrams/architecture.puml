@startuml ChargeMate - Layered Architecture with Services

skinparam componentStyle rectangle
skinparam backgroundColor white
skinparam handwritten false
skinparam defaultFontName Arial
skinparam defaultFontSize 12
skinparam roundcorner 20
skinparam shadowing false

' Presentation Layer
package "Presentation Layer" {
    [Web Client\n(React + Vite + Tailwind)] as web
}

' Reverse Proxy
rectangle "Nginx\nReverse Proxy" as nginx

' Application Layer
package "Application Layer" {
    rectangle "Backend\n(Spring Boot REST API)" {
        [User Service]
        [Station Service]
        [Reservation Service]
        [Analytics Service]
        [Operator Management Service]
    }
}

' Domain Layer
package "Domain Layer" {
    [User Domain]
    [Station Domain]
    [Reservation Domain]
    [Analytics Domain]
    [Payment Domain]
    [Operator Domain]
}

' Infrastructure Layer
package "Infrastructure Layer" {
    database "PostgreSQL\nDatabase" as db
}

' External APIs
cloud "Payment API\n(External)" as paymentApi

' Fluxos
web -down-> nginx : HTTP/HTTPS
nginx -down-> [User Service] : Proxy (REST)
nginx -down-> [Station Service]
nginx -down-> [Reservation Service]
nginx -down-> [Analytics Service]
nginx -down-> [Operator Management Service]

[User Service] -down-> [User Domain]
[Station Service] -down-> [Station Domain]
[Reservation Service] -down-> [Reservation Domain]
[Analytics Service] -down-> [Analytics Domain]
[Operator Management Service] -down-> [Operator Domain]

[User Domain] -down-> db
[Station Domain] -down-> db
[Reservation Domain] -down-> db
[Analytics Domain] -down-> db
[Payment Domain] -down-> db
[Operator Domain] -down-> db

[Payment Domain] ..> paymentApi : REST

@enduml